[toc]

## 虚拟DOM的实现原理

### 定义

Virtual DOM是对DOM的抽象，本质上是JavaScript对象，这个对象就是更加轻量级的对DOM的描述，提高重绘性能。

### 虚拟DOM的优劣

#### 优点

- 保证性能下限: 虚拟DOM可以经过diff找出最小差异，然后批量进行patch，这种操作虽然比不上手动优化，但是比起粗暴的DOM操作性能要好很多——频繁变动DOM会造成浏览器的回流或者重绘，带来一定的性能问题，因此虚拟DOM可以保证性能下限。
- 无需手动操作DOM: 虚拟DOM的diff和patch都是在一次更新中自动进行的，我们无需手动操作DOM，极大提高开发效率。
- 跨平台: 虚拟DOM本质上是JavaScript对象，而DOM与平台强相关，相比之下虚拟DOM可以进行更方便地跨平台操作，例如服务器渲染、移动端开发等等。
- 打开了函数式UI编程的大门。

#### 缺点

- 首次渲染大量DOM时，由于多了一层虚拟DOM的计算，会比 innerHTML 插入慢。虚拟DOM需要在内存中的维护一份DOM的副本。
- 单一的、频繁的更新场景下，虚拟DOM将会花费更多的时间处理计算的工作。比如，你有一个DOM节点相对较少页面，用虚拟DOM，它实际上有可能会更慢。但对于大多数单页面应用，应该都会更快。这也是React和Vue中的更新用了异步的方法，频繁更新时，只更新最后一次的。

### 参考资料

【1】[虚拟dom及dIff算法](https://juejin.cn/post/6844904078196097031)

